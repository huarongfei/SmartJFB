<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>广告位管理 - Ad Management | 专业体育比分系统</title>
  <link rel="stylesheet" href="css/ad-manager.css">
</head>
<body>
  <div class="container">
    <!-- 头部 -->
    <header class="header">
      <h1>📢 广告位管理中心</h1>
      <p>Advertisement Management Center</p>
      <button id="backBtn" class="btn-back">← 返回</button>
    </header>

    <!-- 操作栏 -->
    <div class="toolbar">
      <button id="addAdBtn" class="btn btn-primary">
        <span class="icon">➕</span>
        添加广告
      </button>
      <button id="resetStatsBtn" class="btn btn-warning">
        <span class="icon">🔄</span>
        重置统计
      </button>
      <button id="refreshBtn" class="btn btn-secondary">
        <span class="icon">🔄</span>
        刷新
      </button>
    </div>

    <!-- 统计概览 -->
    <div class="stats-overview">
      <div class="stat-card">
        <div class="stat-icon">📊</div>
        <div class="stat-info">
          <div class="stat-value" id="totalAds">0</div>
          <div class="stat-label">总广告数</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">✅</div>
        <div class="stat-info">
          <div class="stat-value" id="enabledAds">0</div>
          <div class="stat-label">已启用</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">▶️</div>
        <div class="stat-info">
          <div class="stat-value" id="totalPlays">0</div>
          <div class="stat-label">总播放次数</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">📍</div>
        <div class="stat-info">
          <div class="stat-value" id="activePositions">0</div>
          <div class="stat-label">活跃位置</div>
        </div>
      </div>
    </div>

    <!-- 位置筛选 -->
    <div class="filter-bar">
      <span class="filter-label">位置筛选:</span>
      <select id="positionFilter" class="filter-select">
        <option value="all">全部位置</option>
        <option value="top">顶部</option>
        <option value="bottom">底部</option>
        <option value="left">左侧</option>
        <option value="right">右侧</option>
        <option value="center">中央</option>
        <option value="fullscreen">全屏</option>
      </select>
      <span class="filter-label">类型:</span>
      <select id="typeFilter" class="filter-select">
        <option value="all">全部类型</option>
        <option value="image">图片</option>
        <option value="video">视频</option>
        <option value="text">文本</option>
      </select>
      <span class="filter-label">状态:</span>
      <select id="statusFilter" class="filter-select">
        <option value="all">全部状态</option>
        <option value="enabled">已启用</option>
        <option value="disabled">已禁用</option>
      </select>
    </div>

    <!-- 广告列表 -->
    <div class="ads-grid" id="adsGrid">
      <div class="loading">加载中...</div>
    </div>

    <!-- 空状态 -->
    <div class="empty-state" id="emptyState" style="display: none;">
      <div class="empty-icon">📢</div>
      <p>暂无广告</p>
      <button class="btn btn-primary" onclick="document.getElementById('addAdBtn').click()">
        添加第一个广告
      </button>
    </div>
  </div>

  <!-- 添加/编辑广告模态框 -->
  <div id="adModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">添加广告</h3>
        <button class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <form id="adForm" class="ad-form">
          <input type="hidden" id="adId">

          <div class="form-group">
            <label>广告名称 *</label>
            <input type="text" id="adName" required placeholder="输入广告名称">
          </div>

          <div class="form-group">
            <label>广告类型 *</label>
            <select id="adType" required>
              <option value="image">🖼️ 图片</option>
              <option value="video">🎬 视频</option>
              <option value="text">📝 文本</option>
            </select>
          </div>

          <div class="form-group">
            <label>显示位置 *</label>
            <select id="adPosition" required>
              <option value="top">⬆️ 顶部横幅</option>
              <option value="bottom">⬇️ 底部横幅</option>
              <option value="left">⬅️ 左侧边栏</option>
              <option value="right">➡️ 右侧边栏</option>
              <option value="center">⏺ 中央弹窗</option>
              <option value="fullscreen">📺 全屏</option>
            </select>
          </div>

          <div class="form-group" id="contentGroup">
            <label>内容URL *</label>
            <input type="text" id="adContent" required placeholder="https://example.com/ad.jpg">
          </div>

          <div class="form-group">
            <label>播放时长 (秒) *</label>
            <input type="number" id="adDuration" min="1" max="300" value="15" required>
          </div>

          <div class="form-group">
            <label>优先级 (0-10) *</label>
            <input type="number" id="adPriority" min="0" max="10" value="0" required>
            <small>数值越高越优先播放</small>
          </div>

          <div class="form-group">
            <label>播放时间表</label>
            <div id="scheduleList" class="schedule-list">
              <!-- 时间表项动态添加 -->
            </div>
            <button type="button" id="addScheduleBtn" class="btn btn-small">
              ➕ 添加时间段
            </button>
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="adEnabled" checked>
              <span>启用此广告</span>
            </label>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="cancelBtn">取消</button>
        <button type="button" class="btn btn-primary" id="saveBtn">保存</button>
      </div>
    </div>
  </div>

  <!-- 预览模态框 -->
  <div id="previewModal" class="modal modal-large">
    <div class="modal-content">
      <div class="modal-header">
        <h3>广告预览</h3>
        <button class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <div id="previewContent" class="preview-content">
          <!-- 预览内容动态生成 -->
        </div>
      </div>
    </div>
  </div>

  <!-- 确认删除模态框 -->
  <div id="confirmModal" class="modal">
    <div class="modal-content modal-small">
      <div class="modal-header">
        <h3>确认删除</h3>
        <button class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <p>确定要删除这个广告吗？此操作不可撤销。</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="confirmCancelBtn">取消</button>
        <button type="button" class="btn btn-danger" id="confirmDeleteBtn">删除</button>
      </div>
    </div>
  </div>

  <script src="/js/socket-client.js"></script>
  <script src="/js/ad-manager.js"></script>
</body>
</html>
